> 产生的DLL （VS2005, MATLAB7.5, mwArray）-阿里云开发者社区<br />
> [https://developer.aliyun.com/article/341058](https://developer.aliyun.com/article/341058)<br />
> Class used to pass input/output arguments to C++ functions generated by MATLAB Compiler SDK - MATLAB - MathWorks 中国**_【mwArray】_**<br />
> [https://ww2.mathworks.cn/help/compiler_sdk/cxx/mwarray.html](https://ww2.mathworks.cn/help/compiler_sdk/cxx/mwarray.html)<br />
> String class used by the mwArray API to pass string data as output from certain methods - MATLAB - MathWorks 中国**_【mwstring】_**<br />
> [https://ww2.mathworks.cn/help/compiler_sdk/cxx/mwstring.html?searchHighlight=mwString&s_tid=srchtitle_mwString_1](https://ww2.mathworks.cn/help/compiler_sdk/cxx/mwstring.html?searchHighlight=mwString&s_tid=srchtitle_mwString_1)



## 案例1:double数值传递
> 输入输出参数1个或多个
> 传递变量为数值型，包括标量/向量/数组
> 数值类型为int/double/bool
> 好像不支持字符串数组

![](https://mypic2016.oss-cn-beijing.aliyuncs.com/picGo/202303191445446.png)<br />

### Matlab文件
```matlab
function [y,z] = myadd(a, b)
  y = a+b;
  z = a+2*b;
end
```
### 调用程序

```matlab
#include "mclmcr.h"
#include "libmyadd.h"

int _tmain(int argc, _TCHAR* argv[])
{

       std::cout << "Hello world!" << std::endl;
       // 初始化 MCR
       if( !mclInitializeApplication(NULL,0) ) 
       { 
            std::cout << "Could not initialize the MCR!" << std::endl;
            return -1; 
       } 

       // 初始化 自定义的 lib
       if( !libmyaddInitialize())
       {
            std::cout << "Could not initialize your lib!" << std::endl;
            return -1; 
       }


       // 创建一个double类型数组对象xData，并动态分配内存空间
       double *aData;
       aData = new double[4];
       int i;
       for( i=0; i<4; ++i)
       {
            aData[i] = 1.0*i;
       }

       // 声明Matlab的数组:a
       mwArray a(2, 2,   mxDOUBLE_CLASS);  
       // 将xData数组中的数据复制到Matlab的a对象中，这里实现了c++数据传给Matlab
       a.SetData(aData, 4);  

       mwArray b(2, 2,   mxDOUBLE_CLASS);  // 直接声明并初始化Matlab的数组:b
       b(1,1) = 11.;
       b(1,2) = 12.;
       b(2,1) = 21.;
       b(2,2) = 22.;

       mwArray y(2, 2,   mxDOUBLE_CLASS);  // 声明Matlab的数组:y
       mwArray z(2, 2,   mxDOUBLE_CLASS);  // 声明Matlab的数组:z

    	 // 调用自己编写的lib
       myadd(2, y, z, a, b);         // 依次为:输出变量个数,输出变量，输入变量

       // 下面是将Matlab中的数据取出来给c++
       double *yData, *zData;
       yData = new double[4];
       zData = new double[4];

       y.GetData(yData, 4);
       z.GetData(zData, 4);


       // 销毁MCR和自定义的lib
       libmyaddTerminate();
       mclTerminateApplication();


       return 0;
}
```

## 案例2:字符串传递
```matlab
const char* pstr = "This is a string";  // C++字符串 
mwString str = pstr;  // C++字符串转换为Matlab类型的字符串

mwString str("This is a string");  //  直接定义Matlab字符串
```